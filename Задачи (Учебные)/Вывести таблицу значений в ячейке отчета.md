#ОТЧЕТЫ  [[ВычислитьВыражениеСГруппировкойТаблицаЗначений()]]

### Задача:

Для каждого документа, требуется вывести в одной ячейке, таблицу значений, содержащую список товаров
![[Pasted image 20241104215657.png]]

### Решение:
1. Создаем отчет **РасходныеНакладные**
2. Открываем *Схему компоновки данных* и добавляем набор данных *Запрос:*
```bsl
ВЫБРАТЬ
	РасходнаяНакладнаяТовары.Ссылка КАК Документ,
	РасходнаяНакладнаяТовары.Номенклатура КАК Номенклатура,
	РасходнаяНакладнаяТовары.ЕдиницаИзмерения КАК ЕдИзм,
	РасходнаяНакладнаяТовары.Количество КАК Количество,
	РасходнаяНакладнаяТовары.Цена КАК Цена,
	РасходнаяНакладнаяТовары.Сумма КАК Сумма
ИЗ
	Документ.РасходнаяНакладная.Товары КАК РасходнаяНакладнаяТовары
```

3. Создаем вычисляемое поле *Товары*
![[Pasted image 20241104215936.png]]

3. Определяем ресурс:
*Поле:* Товары
*Выражение:* ВычислитьВыражениеСГруппировкойТаблицаЗначений("Номенклатура, ЕдИзм, Количество, Цена, Сумма")
*Рассчитывать по:* Документ

![[Pasted image 20241104220021.png]]

4. Настраиваем структуру отчета:
- Создаем группировку по полю *Документ*
- Выбираем поле *Товары*
- Устанавливаем заголовок поля: *Товар, ЕдИзм, Кол-во, Цена, Сумма*
![[Pasted image 20241104220204.png]]