### Создание функциональной опции
1. В справочнике "Контрагенты", создаем реквизит "РасчетыВРазрезеДоговоров" (Булево)
![[Pasted image 20240820032326.png]]
---
2. Создаем функциональную опцию "РасчетыВРазрезеДоговоров"
3. В поле "Хранение" выбираем реквизит из пункта 1.
![[Pasted image 20240820033424.png]]
---
4. Во вкладке "Состав" выбираем справочник "ДоговорыКонтрагентов"
![[Pasted image 20240820033708.png]]
---
5. Создаем параметр функциональной опции "Контрагент". Использование: Справочник.Контрагенты
![[Pasted image 20240820033936.png]]
---
6. Создаем обработчики событий в форме документа "ЗаказКлиента"
![[Pasted image 20240820035738.png]]
![[Pasted image 20240820035810.png]]
```bsl
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	УправлениеВидимостьюДоговора();
КонецПроцедуры

&НаКлиенте
Процедура КонтрагентПриИзменении(Элемент)
	УправлениеВидимостьюДоговора();
КонецПроцедуры

&НаКлиенте
Процедура УправлениеВидимостьюДоговора()
	УстановитьПараметрыФункциональныхОпцийФормы(Новый Структура("Контрагент", Объект.Контрагент));
КонецПроцедуры
```
---
### Тестирование функциональной опции
1. Для контрагента "1С-МИНСК" Включаем "Расчеты в разрезе договоров"
![[Pasted image 20240820034916.png]]
2. Создаем него документ заказ клиента. Поле договора отображается
![[Pasted image 20240820035055.png]]
3. Меняем контрагента на другого. Поле "Договор" пропадает
![[Pasted image 20240820035351.png]]