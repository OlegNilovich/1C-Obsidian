#ФОРМЫ 
### Задача: 
Создать команду, которая изменяет тип номенклатуры
![[Pasted image 20240820231009.png]]
### Решение:
![[Pasted image 20240820225020.png]]
1. В справочнике "Номенклатуры" создаем команду "ИзменитьВидНоменклатуры"
2. Группа => "Командная панель формы.Важное"
3. Тип параметра команды => "СправочникСсылка.Номенклатура"
4. Режим использования параметра => "Одиночный"
5. Изменяет данные => Включаем флажок
6. Код модуля команды:
```bsl
&НаКлиенте
Асинх Процедура ОбработкаКоманды(ПараметрКоманды, ПараметрыВыполненияКоманды)
	
	СсылкаНаНоменклатуру = ПараметрКоманды;
	ТипыНоменклатуры = ПолучитьСписокТиповНоменклатур(); 
	
	Ответ = ЖДАТЬ ТипыНоменклатуры.ВыбратьЭлементАсинх("Выберите вид нмоенклатуры");
	Если НЕ Ответ = Неопределено Тогда
		ИзменитьТипНоменклатуры(СсылкаНаНоменклатуру, Ответ.Значение);
	КонецЕсли; 
	
	ОбновитьИнтерфейс();
	
КонецПроцедуры

Функция ПолучитьСписокТиповНоменклатур()
	СписокТиповНоменклатуры = Новый СписокЗначений;
	СписокТиповНоменклатуры.Добавить(Перечисления.ТипыНоменклатуры.Товар); 
	СписокТиповНоменклатуры.Добавить(Перечисления.ТипыНоменклатуры.Услуга);
	Возврат СписокТиповНоменклатуры;
КонецФункции

Процедура ИзменитьТипНоменклатуры(СсылкаНаНоменклатуру, ТипНоменклатуры)
	НоменклатураОбъект = СсылкаНаНоменклатуру.ПолучитьОбъект();
	НоменклатураОбъект.ТипНоменклатуры = ТипНоменклатуры;
	НоменклатураОбъект.Записать();
КонецПроцедуры
```

---
### Задача: 
Создать команду, которая может изменять тип номенклатуры у нескольких элементов
![[Pasted image 20240820232144.png]]
### Решение:
![[Pasted image 20240820231410.png]]1. В справочнике "Номенклатура" создаем команду "ИзменитьВидНоменклатуры"
2. В поле "Группа", выбираем "Командная панель формы.Важное"
3. В поле "Тип параметра", выбираем "СправочникСсылка.Номенклатура"
4. В поле "Режим использования", выбираем "Множественный"
5. В настройке "Изменяет данные", ставим флажок
6. Код модуля команды (по умолчанию он серверный)
```bsl
&НаКлиенте
Асинх Процедура ОбработкаКоманды(ПараметрКоманды, ПараметрыВыполненияКоманды)
	
	МассивСсылок = ПараметрКоманды;
	ТипыНоменклатуры = ПолучитьСписокТиповНоменклатур(); 
	
	Ответ = ЖДАТЬ ТипыНоменклатуры.ВыбратьЭлементАсинх("Выберите вид нмоенклатуры");
	Если НЕ Ответ = Неопределено Тогда
		ИзменитьТипНоменклатуры(МассивСсылок, Ответ.Значение);
	КонецЕсли; 
	
	ОбновитьИнтерфейс();
	
КонецПроцедуры


Функция ПолучитьСписокТиповНоменклатур()
	СписокТиповНоменклатуры = Новый СписокЗначений;
	СписокТиповНоменклатуры.Добавить(Перечисления.ТипыНоменклатуры.Товар); 
	СписокТиповНоменклатуры.Добавить(Перечисления.ТипыНоменклатуры.Услуга);
	Возврат СписокТиповНоменклатуры;
КонецФункции


Процедура ИзменитьТипНоменклатуры(МассивСсылок, ТипНоменклатуры) 
	
	Для каждого СсылкаНаНоменклатуру Из МассивСсылок Цикл
		Если НЕ СсылкаНаНоменклатуру.ЭтоГруппа Тогда
			НоменклатураОбъект = СсылкаНаНоменклатуру.ПолучитьОбъект();
			НоменклатураОбъект.ТипНоменклатуры = ТипНоменклатуры;
			НоменклатураОбъект.Записать();	
		КонецЕсли;
	КонецЦикла;	

КонецПроцедуры
```