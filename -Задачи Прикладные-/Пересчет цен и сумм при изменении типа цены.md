#ФОРМЫ 
### Задача:
При изменении вида цен, требуется выполнять изменение цены номенклатуры и выполнять пересчет суммы для товаров в табличной части документа

![[Pasted image 20240823052340.png]]
![[Pasted image 20240823052435.png]]

### Решение:
1. Создаем обработчик события "ПриИзменении" для элемента формы "ВидЦен"
![[Pasted image 20240823052706.png]]
2. Модуль формы:
```bsl
&НаКлиенте
Процедура ВидЦенПриИзменении(Элемент)
	Если Объект.Товары.Количество() > 0 Тогда
		ПересчитатьЦеныИСуммыТоваров();
	КонецЕсли;
КонецПроцедуры


&НаСервере
Процедура ПересчитатьЦеныИСуммыТоваров()

	Для каждого Товар Из Объект.Товары Цикл
		Отбор = Новый Структура("Номенклатура, ВидЦен", Товар.Номенклатура, Объект.ВидЦен);
		Товар.Цена = РегистрыСведений.ЦеныНоменклатуры.ПолучитьПоследнее(Объект.Дата, 
		Отбор).Цена;
		Товар.Сумма = Товар.Цена * Товар.Количество;
	КонецЦикла;
	
КонецПроцедуры
```