Пример JSON-ответа с сайта: https://egrul.itsoft.ru/short_data/?7708757979
![[Pasted image 20241114131314.png]]

Пример функции для получения данных юридического лица по *ИНН* используя бесплатное API.
![[Pasted image 20241114124041.png]]

```bsl
// <Описание функции>
//
// Параметры:
//  ИНН  - Тип.Строка - Строка с ИНН
//                 <продолжение описания параметра>
//
// Возвращаемое значение:
//   <Тип.Структура>   - Структура сожержит
//									*ВидКонтрагента 
//									*КПП
//									*РегистрационныйНомер
//									*Наименование
//							     	*НаименованиеПолное
//	Если организация не является ИП *ЮридическийАдрес						
//
// Сайт API
// https://egrul.itsoft.ru/
&НаСервереБезКонтекста
Функция ЗК_ПолучитьДанныеКонтрагентаПоИНН(ИНН)
	
	ДанныеКонтрагента = Новый Структура;
	ДанныеКонтрагента.Вставить("ИНН", ИНН); 
	
	АдресСервера = "egrul.itsoft.ru";
	АдресРесурса = "/short_data/?" + ИНН;
	
	Соеденения = Новый HTTPСоединение(АдресСервера,,,,, 30, Новый ЗащищенноеСоединениеOpenSSL);
	
	Запрос = Новый HTTPЗапрос(АдресРесурса);
	
	Попытка
		Ответ = Соеденения.Получить(Запрос);	
	Исключение
		Сообщить("Не удалось получить данные по ИНН по причине: " + ОписаниеОшибки());
		Возврат ДанныеКонтрагента;
	КонецПопытки;
	
	ДанныеЕГРБЛ = Неопределено;
	
	Если Ответ.КодСостояния = 200 Тогда
		
		СтрокаJSON = Ответ.ПолучитьТелоКакСтроку();
		ЧтениеJSON = Новый ЧтениеJSON;
		ЧтениеJSON.УстановитьСтроку(СтрокаJSON);
		
		ДанныеЕГРБЛ = ПрочитатьJSON(ЧтениеJSON, Истина);
		
	Иначе
		
		Текст = СтрШаблон("Не удалось получать данные по ИНН...
		|Код состояния: %1
		|Ответ сервера: %2", Ответ.КодСостояния, СтрокаJSON);
		
		Сообщить(Текст);
		Возврат ДанныеКонтрагента;
		
	КонецЕсли; 
	
	Если ДанныеЕГРБЛ["short_form"] <> Неопределено И ДанныеЕГРБЛ["short_form"] = "ИП" Тогда
		ВидКонтрагента = Перечисления.ВидыКонтрагентовСПАРКРиски.ИндивидуальныйПредприниматель;
	Иначе
		ВидКонтрагента = Перечисления.ВидыКонтрагентовСПАРКРиски.ЮридическоеЛицо;
	КонецЕсли;
	
	ДанныеКонтрагента.Вставить("ВидКонтрагента",				ВидКонтрагента);
	ДанныеКонтрагента.Вставить("КПП",								ДанныеЕГРБЛ["kpp"]);
	ДанныеКонтрагента.Вставить("РегистрационныйНомер",	ДанныеЕГРБЛ["ogrn"]);
	ДанныеКонтрагента.Вставить("Наименование",				ДанныеЕГРБЛ["short_name"]);
	ДанныеКонтрагента.Вставить("НаименованиеПолное",	ДанныеЕГРБЛ["full_name"]);
	
	Если ДанныеЕГРБЛ["address"] <> Неопределено Тогда
		ДанныеКонтрагента.Вставить("ЮридическийАдрес", ДанныеЕГРБЛ["address"]);	
	КонецЕсли;
	
	Возврат ДанныеКонтрагента;
	
КонецФункции // ЗК_ПолучитьДанныеКонтрагентаПоИНН()
```