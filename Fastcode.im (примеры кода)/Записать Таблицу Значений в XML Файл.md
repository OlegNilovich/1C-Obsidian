Преобразует таблицу значений и сохраняет ее в файл xml

*ИмяФайла* - реквизит формы (Строка)
*КаталогВыгрузки* - реквизит формы (Строка)
*СформироватьXMLФайлТоваров* - команда формы

```bsl

&НаКлиенте
Асинх Процедура КаталогВыгрузкиНачалоВыбора(Элемент, ДанныеВыбора, ВыборДобавлением, СтандартнаяОбработка)
	
	Проводник = Новый ДиалогВыбораФайла(РежимДиалогаВыбораФайла.ВыборКаталога);
	Проводник.Заголовок	= "Выберите каталог";
	ВыбранныеФайлы		= ЖДАТЬ Проводник.ВыбратьАсинх();
	
	Если ВыбранныеФайлы <> Неопределено Тогда
		КаталогВыгрузки = ВыбранныеФайлы[0];
	КонецЕсли;
	
КонецПроцедуры

&НаКлиенте
Процедура СформироватьXMLФайлТоваров(Команда)
	СформироватьXMLФайлТоваровСервере();
КонецПроцедуры

&НаСервере
Процедура СформироватьXMLФайлТоваровСервере()
	
	Запрос = Новый Запрос;
	Запрос.Текст = 
	"ВЫБРАТЬ
	|	Номенклатура.Наименование КАК Наименование,
	|	Номенклатура.Код КАК Код
	|ИЗ
	|	Справочник.Номенклатура КАК Номенклатура";
	
	ТЗ = Запрос.Выполнить().Выгрузить();
	
	Если НЕ ЗначениеЗаполнено(ИмяФайла) Тогда
		ИмяФайла = "Новый XML файл";
	КонецЕсли;
	
	ПолноеИмяФайла = КаталогВыгрузки + "\" + ИмяФайла + ".xml";
	
	СохранитьТаблицуЗначенийВФайлXML(ПолноеИмяФайла, ТЗ)
	
КонецПроцедуры

Процедура СохранитьТаблицуЗначенийВФайлXML(ПолноеИмяФайла, ТЗ)
	
	Сериализатор = Новый СериализаторXDTO(ФабрикаXDTO);
	XML = Новый ЗаписьXML;
	XML.ОткрытьФайл(ПолноеИмяФайла);
	Сериализатор.ЗаписатьXML(XML, ТЗ);
	XML.Закрыть();
	
КонецПроцедуры

```