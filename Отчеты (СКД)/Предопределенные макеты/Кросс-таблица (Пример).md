### Задача:

Создать отчет *Остатки товаров* требуемого вида:
![[Pasted image 20240930141254.png]]

Изначальный вид отчета:
![[Pasted image 20240930143543.png]]
### Решение:

##### Структура и общие настройки отчета:

1. Создаем отчет, и открываем схему компоновки данных
2. Вкладка *Наборы данных* => Создаем набор данных *Запрос*, текст запроса:
```bsl
ВЫБРАТЬ
	ОстаткиНоменклатурыОстатки.Номенклатура КАК Номенклатура,
	ОстаткиНоменклатурыОстатки.Склад КАК Склад,
	ОстаткиНоменклатурыОстатки.КоличествоОстаток КАК Остаток
ИЗ
	РегистрНакопления.ОстаткиНоменклатуры.Остатки КАК ОстаткиНоменклатурыОстатки
```
3. Вкладка *Ресурсы* => Добавляем поле *Остаток* в ресурсы
4. Параметры => Определяем *Выражение* для параметра *Период*:
```bsl
ДобавитьКДате(КонецПериода(&Период, "День"),"Секунда", 1)
```
5. Вкладка *Настройки* => Определяем структуру отчета:
![[Pasted image 20240930143626.png]]
6. Добавляем параметр *Период* в состав быстрых пользовательских настроек
![[Pasted image 20240930143859.png]]
7. Отключаем итоги по вертикали
![[Pasted image 20240930142234.png]]
![[Pasted image 20240930144700.png]]
8. Отключаем вывод параметров и отбора
![[Pasted image 20240930142142.png]]
![[Pasted image 20240930144626.png]]
9. Устанавливаем условное оформление для всего отчета: 
- Цвет и стиль границы: Черный (Сплошная)
- Отступ: 1
- Минимальная ширина: 12
![[Pasted image 20240930152131.png]]
![[Pasted image 20240930151954.png]]

##### Заголовок отчета:
![[Pasted image 20240930152541.png]]
1. Создаем группировку *Детальные записи* с вариантом использования *Дополнительная информация*
2. Другие настройки => Макет оформления => *Без оформления*
![[Pasted image 20240930144843.png]]
2. Устанавливаем имя группировки: *Заголовок*
![[Pasted image 20240930144956.png]]
3. Вкладка *Макеты* => Добавляем макет группировки
![[Pasted image 20240930145115.png]]
4. Выбираем имя группировки *Заголовок* из пункта 2.
![[Pasted image 20240930145219.png]]
5. Устанавливаем область ячейки: *R2C1*
![[Pasted image 20240930145552.png]]
6. Определяем **Полужирный** текст внутри ячейки, и вариант заполнения: *Шаблон*
7. Определяем выражение для параметра *Период*.
![[Pasted image 20240930145740.png]]

##### Макет заголовка группировки *Номенклатура*
![[Pasted image 20240930152512.png]]

1. Добавляем макет заголовка группировки
![[Pasted image 20240930152634.png]]
2. Поле группировки: *Номенклатура*. Тип макета: *Заголовок*
![[Pasted image 20240930152742.png]]
3. Определяем область макета: *R4C1*
![[Pasted image 20240930152858.png]]
4. Вводим текст ячейки: *Товар/Склад* и выделяем его полужирным

##### Макет группировки *Склад*
![[Pasted image 20240930153852.png]]
1. Добавляем макет группировки
![[Pasted image 20240930153437.png]]
2. Поле группировки: *Склад*. Тип макета: *Заголовок*
![[Pasted image 20240930153548.png]]
3. Определяем область макета: *R6C1*
![[Pasted image 20240930153651.png]]
4. Вводим текст ячейки: *Склад*, Заполнение: *Параметр*
5. Определяем выражение для параметра *Склад*
![[Pasted image 20240930153750.png]]

##### Макет группировки *Склад*
![[Pasted image 20240930154557.png]]
1. Добавляем макет группировки
![[Pasted image 20240930153437.png]]
2. Поле группировки: *Склад*. Тип макета: *Общий итог подвал*
![[Pasted image 20240930154706.png]]
3. Определяем область макета: *R8C1*
![[Pasted image 20240930154759.png]]
4. Вводим текст ячейки: *Итого*, Заполнение: *Текст*

##### Убираем пустую строку в шапке отчета
![[Pasted image 20241002115101.png]]

1. Добавляем условное оформление для *Таблицы* => Максимальная высота: *6*
![[Pasted image 20241002115400.png]]
2. Определяем область использования: *В заголовке полей*
![[Pasted image 20241002115307.png]]
3. Проверяем результат
![[Pasted image 20241002115536.png]]