```bsl
// 3.1 Конвертация данных 2.0 (Универсальный обмен данными XML)

// Терминология:
//• ПКО – правило конвертации объекта
//• ПКС – правило конвертации свойства
//• ПКГС – правило конвертации группы свойств
//• ПКЗ – правило конвертации значения
//• ПВД – правило выгрузки данных

// Этапы интеграции:
// 1. Определение состава объектов обмена
// 2. Выгрузка данных из источника
// 3. Передача (транспорт) выгруженных данных в приемник
// 4. Загрузка данных в приемник

// Особенности:
//• Нет ограничений на идентичность конфигурации и структуры конкретных объектов
//• Требуется разработка правил обмена данными, структура метаданных может быть разной
//• Для разработки правил можно использовать инструмент «1C:Конвертация данных»
//• Обмен данными выполняется в формате ХML-документов
//• Данные можно передавать из любого узла в любой
//• Используются планы обмена с механизмами регистрации изменений и квитирования

//============================================================================

// Подготовка к обмену:
// Устанавливаем шаблон конфигурации "Конвертация данных 2.1.6.4"
// Создаем базу на основе шаблона "Конвертация данных 2.1.6.4"
// В каталоге с шаблоном, находим обработку "MD82Exp" и копируем ее на рабочий стол

// Запускаем 1С:Предприятие УНФ базы-источника, открываем обработку "MD82Exp"
// Выбираем имя файла выгрузки "Метаданные_Источник", жмем кнопку "Выгрузить"

// Запускаем 1С:Предприятие БП базы-приемника, открываем обработку "MD82Exp"
// Выбираем имя файла выгрузки "Метаданные_Источник", жмем кнопку "Выгрузить"

// Запускаем 1С:Предприятие "Конвертация данных 2.1.6.4"
// Вкладка Обмен данными => Загрузить структуру метаданных => Указываем МД_Источник
// Нажимаем команду "Выполнить загрузку"

// Вкладка Обмен данными => Загрузить структуру метаданных => Указываем МД_Приемник
// Нажимаем команду "Выполнить загрузку"


// Разработка правил обмена:
// Открываем "Настройки правил обмена"
// Нажимаем на кнопку "Новая конвертация"
// Выбираем конфигурацию источник: "УправлениеНебольшойФирмойУчебная"
// Выбираем конфигурацию приемник: "БухгалтерияПредприятияУчебная"
// Вкладка "Дополнительно" => Имя файла правил обмена => Указываем путь и имя
// Жмем "ОК"
// Отказываемся от "Автоматически создавать все правила обмена", закрываем


// Сохранение Правил конвертации данны:
// 1. Настройка правил обмена => Сохранить правила
// 2. Указать автоматически поля поиска? => Нет
// 3. Создать правила выгрузки? => Нет
// 4. Сохранение правил обмена => Сохрнить


// Правила конертации объекта (ПКО):
// 1. Переходим на вкладку "Правила конвертации объектов"
// 2. Жмем на зеленую кнопку (+) Добавить. Закрываем всплывающий мастер настроек
// 3. Снова жмем (+) Добавить, откроется окно "Правило конвертации объектов ПКО"
// 4. Выбираем Объект-источник: "СправочникСсылка.Контрагенты"
// 5. Выбираем Объект-приемник: "СправочникСсылка.Контрагенты"
// 6. Нажимаем "ОК", отказываемся от авто создания конвертации свойств
// 7. Отказываемся от создания правил выгрузки данных


// Правила конвертации свойст (ПКС):
// 1. Вкладка "Конвертация свойств" => Жмем на зеленую кнопку (+) Добавить.
// 2. Указываем реквизит Источника: "Наименование"
// 3. Указываем реквизит Приемника: "Наименование"


// Использование помощника ПКС:
// 1. Вкладка "Конвертация свойств" => Жмем на команду "Синхронизация свойств"
// 2. Указываем реквизит Источника: "Наименование"
// 3. Откроется окно сопоставления свойств
// 4. Желтая заливка указывает на успешное автоматическое сопоставление
// 5. Снимаем флаги с "КонтактнаяИнформация" и "ДополнительныеРеквизиты"
// 6. Сопоставляем вручную: БанковскийСчетПоУмолчанию = ОсновнойБанковскийСчет
// 7. Сопоставляем вручную: КонтактноеЛицо = ОсновноеКонтактноеЛицо
// 8. Снимаем флаг с "Рекурсивно создавать правила конвертации" и жмем "ОК"


// Создания правил ПКО и ПКС для перечисления:
// 1. Создаем правило конвертации объекта (ПКО)
// 2. Источник - ПеречислениеСсылка.ВидыГосударственныхОрганов
// 3. Приемник - ПеречислениеСсылка.ВидыГосударственныхОрганов
// 4. Жмем "ОК", отказываемся от авто создания свойств и правил выгрузки
// 5. Вкладка "Конвертация значений" => Используем "Синхронизация значений"

// Указание нового правила конв свойств для справочника "Контрагенты":
// 1. Выбираем ПКО "Контрагенты" => Конвертация свойств =>
// 2. Два раза кликаем по строчке "ВидГосударственногоОргана"
// 3. Указываем правило "ВидыГосударственныхОрганов"

// Создаем ПКО "СтраныМира"
// 1. СправочникСсылка.СтраныМира = СправочникСсылка.СтраныМира
// 2. ПКС => Синхронизация Свойств => ОК
// 3. ПКО => Контрагенты => ПКС => СтранаРегистрации => Правило => СтраныМира

// ПКО => Контрагенты => ПКС => "ГоловнойКонтрагент" => Правило "Контрагенты"

// ПКО => Контрагенты => ПКС => Родитель => Правило => Контрагенты


// Создание правил ПКО и ПКС для СправочникСсылка.БанковскиеСчета:
// 1. Создаем правило конвертации объекта (ПКО)
// 2. Источник - СправочникСсылка.БанковскиеСчета
// 3. Приемник - СправочникСсылка.БанковскиеСчета
// 4. Жмем "ОК", отказываемся от авто создания свойств и правил выгрузки
// 5. Конвертация свойств => Синхронизация свойств =>
// 6. БанкРасчетов = БанкДляРасчетов


// Создание правил ПКО и ПКС для СправочникСсылка.Банки:
// 1. Создаем правило конвертации объекта (ПКО)
// 2. Источник - СправочникСсылка.Банки
// 3. Приемник - СправочникСсылка.Банки
// 4. Жмем "ОК", отказываемся от авто создания свойств и правил выгрузки
// 5. Конвертация свойств => Синхронизация свойств => Сопостовляем
// 6. Страна = Страна => Правило КО: СтраныМира
// 7. Родитель = Родитель => Правило КО: Банки. Жмем "ОК"

// ПКО => БанковскиеСчета => ПКС => Банк => Правило => Банки


// Создание правил ПКО и ПКС для СправочникСсылка.Валюты:
// 1. Создаем правило конвертации объекта (ПКО)
// 2. Источник - СправочникСсылка.Валюты
// 3. Приемник - СправочникСсылка.Валюты	
// 4. Жмем "ОК", отказываемся от авто создания свойств и правил выгрузки
// 5. Конвертация свойств => Синхронизация свойств => Сопостовляем
// 6. ОсновнаяВалюта = ОсновнаяВалюта => Правило КО: Валюты. Жмем "ОК"


// Создание правил ПКО и ПКЗ ПеречислениеСсылка.СпособыУстановкиКурсаВалюты:
// 1. Создаем правило конвертации объекта (ПКО)
// 2. Источник - ПеречислениеСсылка.СпособыУстановкиКурсаВалюты
// 3. Приемник - ПеречислениеСсылка.СпособыУстановкиКурсаВалюты	
// 4. Жмем "ОК", отказываемся от авто создания свойств и правил выгрузки
// 5. Конвертация значений => Синхронизация значений => Сопостовляем. ОК

// ПКО => Валюты => ПКС => СпособУстановкиКурса => Правило => СпособыУстановкиКурсаВалюты
// ПКО => БанковскиеСчета => ПКС => ВалютаДенежныхСредств => Правило => Валюты
// ПКО => БанковскиеСчета => ПКС => Владелец => Правило => Контрагенты
// ПКО => БанковскиеСчета => ПКС => БанкРасчетов => Правило => Банки

// ПКО => Контрагенты => ПКС => БанковскийСчет => Правило => БанковскиеСчета
// ПКО => Контрагенты => ПКС => БанковскийСчет => Правило => БанковскиеСчета

// Создание правил ПКО и ПКС СправочникСсылка.КонтактныеЛица:
// 1. Создаем правило конвертации объекта (ПКО)
// 2. Источник - ПеречислениеСсылка.СправочникСсылка.КонтактныеЛица
// 3. Приемник - ПеречислениеСсылка.СправочникСсылка.КонтактныеЛица	
// 4. Жмем "ОК", отказываемся от авто создания свойств и правил выгрузки
// 5. Конвертация значений => Синхронизация значений => Сопостовляем. ОК

// ПКО => Контрагенты => ПКС => КонтактноеЛицо => Правило => КонтактныеЛица


//=========================================================================
// Создание правил выгрузки данных:
// 1. Настройка правил обмена => Правила выгрузки данных => (+) Добавить
// 2. Объект выборки => СправочникСсылка.Контрагенты. Жмем "ОК"


// Сопоставление данных:
// ПКО => Контрагенты => Двойной клик => Настройки => Продолжить поиск по полям
// ПКО => Контрагенты => ПКС => ИНН => Поиск => Ставим флажок

// При сохранении Правил будет предложено автоматически назначить для каждого
// ПКО поля поиска - соглашаемся.

// Для справочника с иерархией, обязательно должен быть поиск по "ЭтоГруппа"

// Контактные лица будем искать по наименованию

// Для каждого ПКО => Настройки => Продолжить искать по полям поиска

//------------------------------------------------------------------------------

// Можем программно задать приоритет по полям поиска:
// Сначала поиск будет по "ИНН" = "ИНН" и "КПП" = "КПП"
// А потом будет поиск по "Наименование" = "Наименование"
// ПКО => Контрагенты => Двойной клик => Обработчики событий => Поля поиска:
Если НомерВариантаПоиска = 1 тогда
 	СтрокаИменСвойствПоиска = "ИНН, КПП";
Иначе
	СтрокаИменСвойствПоиска = "Наименование";
КонецЕсли;


//=============================================================================
// ОБМЕН ДАННЫМИ

// 1С:Предприятие УНФ => Обработка: Универсальный обмен данными в формате XML
// Вкладка "Выгрузка данных"
// Имя файла правил на сервере => C:\Users\Oleg\Desktop\ПравилаОбменаДанными.xml
// Имя файла данных на сервере => C:\Users\Oleg\Desktop\Данные_УНФ.xml
// Нажимаем на кнопку "Выгрузить данные"


// 1С:Предприятие БП => Обработка: Универсальный обмен данными в формате XML
// Вкладка "Загрузка данных"
// Имя файла загрузки на сервере => C:\Users\Oleg\Desktop\Данные_УНФ.xml
// Нажимаем на кнопку "Загрузить данные"


//=============================================================================
// Автоматизация обмена данными



//=============================================================================

```