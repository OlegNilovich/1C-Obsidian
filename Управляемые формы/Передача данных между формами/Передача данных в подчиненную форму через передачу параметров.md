#ФОРМЫ 
### Задача:
Требуется создать две формы: **ГлавнаяФорма** и **ПодчиненнаяФорма**. 
Главная форма по команде будет открывать подчиненную форму с передачей параметров реквизитов: **Контрагент** и **ВидНоменклатуры**.
Подчиненная форма будет принимать параметры и отображать список номенклатуры с отбором
![[Pasted image 20240826015535.png]]

---
### Решение:
Создаем обработку **ПередачаДанныхМеждуФормами**
Создаем формы: **ГлавнаяФорма** и **ПодчиненнаяФорма**
##### Главная форма:
1. Открываем редактор Главной формы
2. Создаем реквизиты и команду:
- Реквизит: "ВидНоменклатуры" Тип (СправочникСсылка.ВидыНоменклатуры)
- Реквизит: "Контрагент" Тип (СправочникСсылка.Контрагенты)
- Команда: **ОткрытьПодчиненнуюФормуСПередачейПараметров** (*&НаКлиенте*)
![[Pasted image 20240826012810.png]]
3. Модуль формы:
```bsl
&НаКлиенте
Процедура ОткрытьПодчиненнуюФормуСПередачейПараметров(Команда)
	ПутьКФорме = "Обработка.ПередачаДанныхМеждуФормами.Форма.ПодчиненнаяФорма";
	СтруктураПараметров = Новый Структура;
	СтруктураПараметров.Вставить("ВидНоменклатуры", ВидНоменклатуры);
	СтруктураПараметров.Вставить("Контрагент", Контрагент);
	ОткрытьФорму(ПутьКФорме, СтруктураПараметров);
КонецПроцедуры
```
##### Подчиненная форма:
1. Открываем редактор Подчиненной формы
2. Создаем реквизит "Контрагент" Тип (СправочникСсылка.Контрагенты)
3. Создаем реквизит "Товары" Тип (ДинамическийСписок)
![[Pasted image 20240826020504.png]]
4. Открываем Настройку списка для реквизита "Товары". Создаем запрос:
![[Pasted image 20240826020947.png]]
```bsl
ВЫБРАТЬ
	Номенклатура.Наименование КАК Наименование,
	Номенклатура.ВидНоменклатуры КАК ВидНоменклатуры
ИЗ
	Справочник.Номенклатура КАК Номенклатура
ГДЕ
	НЕ Номенклатура.ЭтоГруппа
	И Номенклатура.ВидНоменклатуры = &ВидНоменклатуры
```
5. Создаем обработчик события формы "ПриСозданииНаСервере"
![[Pasted image 20240826021209.png]]
6. Модуль формы:
```bsl
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	// Включаем отображение таблицы "Товары" в виде списка
	Элементы.Товары.Отображение = ОтображениеТаблицы.Список;
	
	// Устанавливаем значение параметра "ВидНоменклатуры" в запрос динамического списка
	Если Параметры.Свойство("ВидНоменклатуры") Тогда
		Товары.Параметры.УстановитьЗначениеПараметра("ВидНоменклатуры", Параметры.ВидНоменклатуры);
	КонецЕсли;
	
	// Устанавливаем значение параметра "Контрагент", если параметр был передан
	Если Параметры.Свойство("Контрагент") Тогда
		Контрагент = Параметры.Контрагент;
	КонецЕсли;
	
КонецПроцедуры
```