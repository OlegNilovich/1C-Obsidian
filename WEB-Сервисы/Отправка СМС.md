```bsl
//============================================================================
// Отправка СМС контрагентам

Функция ПолучитьНомерТелефонаКонтрагента(Контрагент)
	
	Запрос = Новый Запрос;
	Запрос.Текст = 
		"ВЫБРАТЬ
		|	КонтрагентыКонтактнаяИнформация.Значение КАК Значение
		|ИЗ
		|	Справочник.Контрагенты.КонтактнаяИнформация КАК КонтрагентыКонтактнаяИнформация
		|ГДЕ
		|	КонтрагентыКонтактнаяИнформация.Вид = &Вид
		|	И КонтрагентыКонтактнаяИнформация.Ссылка = &Контрагент";
	
	Запрос.УстановитьПараметр("Вид", Справочники.ВидыКонтактнойИнформации.ТелефонКонтрагента);
	Запрос.УстановитьПараметр("Контрагент", Контрагент);
	
	РезультатЗапроса = Запрос.Выполнить();
	
	Телефон = Неопределено;
	Если НЕ РезультатЗапроса.Пустой() Тогда
		Выборка = РезультатЗапроса.Выбрать();
		Выборка.Следующий();
		Телефон = Выборка.Значение;
	КонецЕсли;
	
	Возврат Телефон;

КонецФункции

Процедура ОбработкаПроведения(Отказ, РежимПроведения)
	
	Сервер	= sms.ru;
	Порт	= 443;                
	Прокси	= Новый ИнтернетПрокси(Ложь);
	SSL		= Новый ЗащищенноеСоединениеOpenSSL();
	СоединениеHTTP = Новый HTTPСоединение(Сервер, Порт,,, Прокси,,SSL);
	
	api_id	= "F2522FDF-BADF-1BAB-ABA2-6845AE45E538";
	number = 88005553535;
	msg = "Ваш заказ принят";
	Сервис = СтрШаблон("/sms/send?api_id=%1&to=%2&msg=%3&json=1", api_id, number, msg);
	Заголовки = Новый Соответствие;
	Заголовки.Вставить("Accept", "application/json");
	ЗапросHTTP = Новый HTTPЗапрос(Сервис, Заголовки);
	
	Результат = СоединениеHTTP.Получить(ЗапросHTTP);
	
	Если Результат.КодСостояния <> 200 Тогда
		ТелоОтвета = Результат.ПолучитьТелоКакСтроку();
		Сообщить("Не удалось отправить SMS, код состояния " + 
		Результат.КодСостояния + ", ответ сервера: " + ТелоОтвета);
		Возврат;
	КонецЕсли;
	
	Данные = Результат.ПолучитьТелоКакСтроку();
	ЧтениеJSON = Новый ЧтениеJSON;
	ЧтениеJSON.УстановитьСтроку(Данные);
	ДанныеСоответствие = ПрочитатьJSON(ЧтениеJSON, Истина);
	СписокНомеров = ДанныеСоответствие.Получить("sms");
	
	Для каждого ТекНомер Из СписокНомеров Цикл
		РезультатОтправки = ТекНомер.Значение;
		Если РезультатОтправки.Получить("sms_id") <> Неопределено Тогда
			Идентификатор = ТекНомер.Значение["sms_id"];
		КонецЕсли;
	КонецЦикла;
		
КонецПроцедуры


Процедура ОбновитьСтатусСМС()
	
	Сервер			= "sms.ru";
	Порт			= 443;       
	Прокси			= Новый ИнтернетПрокси(Ложь);
	SSL				= Новый ЗащищенноеСоединениеOpenSSL();
	СоединениеHTTP	= Новый HTTPСоединение(Сервер,Порт,,,Прокси,,SSL);
	
	api_id = "F2522FDF-BADF-1BAB-ABA2-6845AE45E538";
	sms_id = 12345;
	Сервис = СтрШаблон("/sms/status?api_id=%1&sms_id=%2&json=1", api_id, sms_id);
	Заголовки = Новый Соответствие;
	Заголовки.Вставить("Accept","application/json");
	
	ЗапросHTTP = Новый HTTPЗапрос(Сервис, Заголовки);
	Результат = СоединениеHTTP.Получить(ЗапросHTTP);
	
	Если Результат.КодСостояния <> 200 Тогда
		ТелоОтвета = Результат.ПолучитьТелоКакСтроку();
		Сообщить("Не удалось получить статус отправки, код состояния " + 
			Результат.КодСостояния + ", ответ сервера: " + ТелоОтвета);
		Возврат;
	КонецЕсли;
	
	Данные = Результат.ПолучитьТелоКакСтроку();
	ЧтениеJSON = Новый ЧтениеJSON;
	ЧтениеJSON.УстановитьСтроку(Данные);
	ДанныеСоответствие = ПрочитатьJSON(ЧтениеJSON, Истина);
	СписокСообщений = ДанныеСоответствие.Получить("sms");
	ИнформацияОТекущем = СписокСообщений.Получить(Идентификатор);
	
	Если ИнформацияОТекущем.Получить("status_text") <> Неопределено Тогда
		Статус = ИнформацияОТекущем["status_text"];
	КонецЕсли;
	
КонецПроцедуры
```