### Задача:
Требуется создать справочник "Пользователи", который позволит создавать пользователей и назначать им права в режиме 1С:Предприятие
### Решение:
1. Создаем справочник "Пользователи".
2. Создаем реквизиты:
- "ПолноеИмя"					(Строка, 50)		
- "Пароль"						(Строка, 20)
- "ДатаРождения"					(Дата, Дата)
- "ДоступРазрешен"				(Булево)
- "Недействителен"				(Булево)
- "ПоказыватьВСпискеВыбора"		(Булево)
- "УникальныйИдентификатор"		(УникальныйИдентификатор)
3. Создаем табличную часть "Роли.
4. Создаем реквизиты табличной части:
- "Пометка"			(Булево)
- "ИмяРоли"			(Строка, 100)
- "Представление"	(Строка, 100)
5. Создаем форму элемента справочника
6. Создаем событие формы "ПриСозданииНаСервере"
7. Модуль формы элемента справочника:
```bsl

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	// Если ссылка пустая - значит пользователь новый
	Если Объект.Ссылка.Пустая() Тогда
		Для каждого ТекущаяРоль Из Метаданные.Роли Цикл
			СтрокаРоли							= Объект.Роли.Добавить();
			СтрокаРоли.ИмяРоли				= ТекущаяРоль.Имя;
			СтрокаРоли.Представление	= ТекущаяРоль.Синоним;
			СтрокаРоли.Пометка				= Ложь;
		КонецЦикла;
	Иначе
		ID = Объект.ИдентификаторПользователя;
		Пользователь = ПользователиИнформационнойБазы.НайтиПоУникальномуИдентификатору(ID);
		Если Пользователь <> Неопределено Тогда
			//это не новый пользователь
			ВсеРоли = Метаданные.Роли;
			Для каждого Роль Из ВсеРоли Цикл
				РольУстановлена = Пользователь.Роли.Содержит(Роль);
				СтрокаРоли					= Объект.Роли.Добавить();
				СтрокаРоли.ИмяРоли			= Роль.Имя;
				СтрокаРоли.Представление	= Роль.Синоним;
				СтрокаРоли.Пометка			= РольУстановлена;
			КонецЦикла;
			
		КонецЕсли;
	КонецЕсли;
	
КонецПроцедуры

```
8. Модуль объекта справочника:
```bsl
Процедура ПередЗаписью(Отказ)
	 
	Если ЭтоНовый() Тогда
		НайденныйПользователь = ПользователиИнформационнойБазы.НайтиПоИмени(Наименование);
		Если НайденныйПользователь = Неопределено Тогда
			ПользовательИБ = ПользователиИнформационнойБазы.СоздатьПользователя();
			ОбновитьДанныеПользователяИБ(ПользовательИБ);		
			ИдентификаторПользователя = ПользовательИБ.УникальныйИдентификатор;
		Иначе
			Сообщить("В списке уже есть пользователь с таким именем!");
			Отказ = Истина;
		КонецЕсли;           
	Иначе  
		ПользовательИБ = 
		ПользователиИнформационнойБазы.НайтиПоУникальномуИдентификатору(ИдентификаторПользователя);
		Если ПользовательИБ <> Неопределено Тогда
			ОбновитьДанныеПользователяИБ(ПользовательИБ);
		КонецЕсли;
	КонецЕсли;

КонецПроцедуры


Процедура ОбновитьДанныеПользователяИБ(ПользовательИБ)
	
	ПользовательИБ.Имя				= Наименование;
	ПользовательИБ.ПолноеИмя	= ПолноеИмя; 
	ПользовательИБ.Пароль			= Пароль; 
	
	ПользовательИБ.Роли.Очистить();
	Если ДополнительныеСвойства.Свойство("СписокРолей") Тогда
		
		СписокРолей = ДополнительныеСвойства.СписокРолей;
		Для каждого РольЭлемент Из СписокРолей Цикл      
			
			Если РольЭлемент.Пометка Тогда 
				ИмяРоли = РольЭлемент.Значение;
				ПользовательИБ.Роли.Добавить(Метаданные.Роли[ИмяРоли]);
			КонецЕсли;

		КонецЦикла;
	
	КонецЕсли;
	
	ПользовательИБ.Записать();       
	
КонецПроцедуры
```

