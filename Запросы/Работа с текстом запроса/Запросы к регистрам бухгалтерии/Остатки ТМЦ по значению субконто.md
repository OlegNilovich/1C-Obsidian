#ЗАПРОСЫ 

```bsl
&НаСервере
Процедура ОстаткиПоЗначениюСубконто()
	
	Запрос = Новый Запрос;
	Запрос.Текст = 
	"ВЫБРАТЬ
	|	ОсновнойРегистрБухгалтерииОстатки.Субконто1 КАК		Товар,
	|	ОсновнойРегистрБухгалтерииОстатки.Субконто2 КАК		Склад,
	|	ОсновнойРегистрБухгалтерииОстатки.СуммаОстаток КАК	Остаток
	|ИЗ
	|	РегистрБухгалтерии.ОсновнойРегистрБухгалтерии.Остатки(
	|									, 
	|									Счет В (&СчетТоваров, &СчетМатериалов), 
	|									, 
	|									) КАК ОсновнойРегистрБухгалтерииОстатки
	|ГДЕ
	|	ОсновнойРегистрБухгалтерииОстатки.Субконто1 = &Номенклатура И
	|   ВЫБОР 
	|      КОГДА ОсновнойРегистрБухгалтерииОстатки.Счет = &СчетТоваров
	|      ТОГДА ОсновнойРегистрБухгалтерииОстатки.Субконто2 = &Склад 
	|      ИНАЧЕ ИСТИНА 
	|   КОНЕЦ
	|
	|ИТОГИ
	|	СУММА(Остаток)
	|ПО
	|	Товар";
	
	Запрос.УстановитьПараметр("СчетТоваров", ПланыСчетов.ОсновнойПланСчетов.Товары);
	Запрос.УстановитьПараметр("СчетМатериалов", ПланыСчетов.ОсновнойПланСчетов.Материалы);
	Запрос.УстановитьПараметр("Номенклатура", Товар);
	Запрос.УстановитьПараметр("Склад", Склад);
	
	Результат = Запрос.Выполнить();
	Остатки = Результат.Выбрать();
	
	ТЗ.Очистить();
	Пока Остатки.Следующий() Цикл
		НоваяСтрока = ТЗ.Добавить();
		НоваяСтрока.Товар = Остатки.Товар;
		НоваяСтрока.Склад = Остатки.Склад;
		НоваяСтрока.Остаток = Остатки.Остаток;
	КонецЦикла;
	
КонецПроцедуры
```