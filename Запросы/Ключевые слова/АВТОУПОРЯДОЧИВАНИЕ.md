#ЗАПРОСЫ

Предложение **АВТОУПОРЯДОЧИВАНИЕ** позволяет включить режим автоматического формирования полей для упорядочивания результата запроса.

**Автоупорядочивание** работает по следующим принципам:

- Если в запросе было указано предложение [УПОРЯДОЧИТЬ ПО](v8help://SyntaxHelperQueries/ORDERBYSection), то каждая ссылка на таблицу, находящаяся в этом предложении, будет заменена полями, по которым по умолчанию сортируется таблица (для справочников это код или наименование, для документов – дата документа). Если поле для упорядочивания ссылается на иерархический справочник, то будет применена иерархическая сортировка по этому справочнику. 
- Если в запросе отсутствует предложение [УПОРЯДОЧИТЬ ПО](v8help://SyntaxHelperQueries/ORDERBYSection), но есть предложение [ИТОГИ](v8help://SyntaxHelperQueries/query_totals.html), тогда результат запроса будет упорядочен по полям, присутствующим в предложении [ИТОГИ](v8help://SyntaxHelperQueries/query_totals.html) после ключевого слова **ПО**, в той же последовательности и, в случае если итоги рассчитывались по полям – ссылкам, то по полям сортировки по умолчанию таблиц, на которые были ссылки. 
- Если в запросе отсутствуют предложения [УПОРЯДОЧИТЬ ПО](v8help://SyntaxHelperQueries/ORDERBYSection) и [ИТОГИ](v8help://SyntaxHelperQueries/query_totals.html), но есть предложение [СГРУППИРОВАТЬ ПО](v8help://SyntaxHelperQueries/ORDERBYSection), тогда результат запроса будет упорядочен по полям, присутствующим в предложении, в той же последовательности и, в случае если группировка велась по полям – ссылкам, то по полям сортировки по умолчанию таблиц, на которые были ссылки. 
- В случае же, если в запросе отсутствуют предложения и [УПОРЯДОЧИТЬ ПО](v8help://SyntaxHelperQueries/ORDERBYSection), [ИТОГИ](v8help://SyntaxHelperQueries/query_totals.html) и [СГРУППИРОВАТЬ ПО](v8help://SyntaxHelperQueries/ORDERBYSection), результат будет упорядочен по полям сортировки по умолчанию для таблиц, из которых выбираются данные, в порядке их появления в запросе.

В случае, если запрос содержит предложение [ИТОГИ](v8help://SyntaxHelperQueries/query_totals.html), каждый уровень итогов упорядочивается отдельно.

```
ВЫБРАТЬ
	ЗаказТовара.Дата,
	ЗаказТовара.Номер,
	ЗаказТовара.Клиент,
	ЗаказТовара.СуммаЗаказа
ИЗ
	Документ.ЗаказТовара КАК ЗаказТовара

УПОРЯДОЧИТЬ ПО
	ЗаказТовара.Ссылка
АВТОУПОРЯДОЧИВАНИЕ
```

Тоже самое что и такая сортировка
```bsl
ВЫБРАТЬ
	ЗаказТовара.Дата,
	ЗаказТовара.Номер,
	ЗаказТовара.Клиент,
	ЗаказТовара.СуммаЗаказа
ИЗ
	Документ.ЗаказТовара КАК ЗаказТовара	
УПОРЯДОЧИТЬ ПО
	ЗаказТовара.Дата,
	ЗаказТовара.Номер
```