#ЗАПРОСЫ

Использование результата одного запроса в качестве параметра в другом запросе

```bsl
&НаКлиенте
Процедура ПараметрРезультатЗапроса(Команда)
	ПараметрРезультатЗапросаНаСервере();
КонецПроцедуры
&НаСервере
Процедура ПараметрРезультатЗапросаНаСервере()
	
	// 1. Получаем результат запроса, который мы собираемся использовать в качестве параметра
	Запрос = Новый Запрос;
	Запрос.Текст = 
		"ВЫБРАТЬ
		|	РасходнаяНакладнаяТовары.Номенклатура КАК		Номенклатура,
		|	РасходнаяНакладнаяТовары.Количество КАК			Количество
		|ИЗ
		|	Документ.РасходнаяНакладная.Товары КАК РасходнаяНакладнаяТовары";
	РезультатЗапроса = Запрос.Выполнить();
	
	// 2. Помещаем результат запроса во временную таблицу
	Запрос = Новый Запрос;
	Запрос.МенеджерВременныхТаблиц = Новый МенеджерВременныхТаблиц;
	Запрос.Текст = 
	"ВЫБРАТЬ
	|	РезультатЗапроса.Номенклатура КАК	Номенклатура,
	|	РезультатЗапроса.Количество КАК			Количество
	|ПОМЕСТИТЬ ВТ_ТоварыДокумента
	|ИЗ
	|	&РезультатЗапроса КАК РезультатЗапроса";
	Запрос.УстановитьПараметр("РезультатЗапроса", РезультатЗапроса);
	Запрос.Выполнить();
	
	// 3. Используем рвременную таблицу для соединения с таблицей "ЦеныНоменклатуры"
	Запрос.Текст = "ВЫБРАТЬ
	|	ВТ_ТоварыДокумента.Номенклатура КАК		Номенклатура,
	|	ВТ_ТоварыДокумента.Количество КАК			Количество,
	|	ЕСТЬNULL(Цены.Цена, 0) КАК						Цена
	|ИЗ
	|	ВТ_ТоварыДокумента КАК ВТ_ТоварыДокумента
	|		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.ЦеныНоменклатуры.СрезПоследних() КАК Цены
	|		ПО ВТ_ТоварыДокумента.Номенклатура = Цены.Номенклатура";
	
	// 4. Обрабатываем результат
	Выборка = Запрос.Выполнить().Выбрать();
	Пока Выборка.Следующий() Цикл
		Текст = "Номенклатура: %1, Количество: %2, Цена: %3";
		Сообщить(СтрШаблон(Текст, Выборка.Номенклатура, Выборка.Количество, Выборка.Цена,));
	КонецЦикла;
	
КонецПроцедуры
```