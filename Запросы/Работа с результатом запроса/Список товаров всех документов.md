Получаем список товаров из всех табличных частей всех документов, в которых встречается реквизит "Товар" с типом (СправочникСсылка.Товары)
```bsl
Запрос = Новый Запрос;

Для Каждого Док Из Метаданные.Документы Цикл
	Для Каждого ТЧ Из Док.ТабличныеЧасти Цикл
		ИмяДокумента = Док.Имя;
		ИмяТЧ = ТЧ.Имя;
		
		Если НЕ Запрос.Текст = "" Тогда
			Запрос.Текст = Запрос.Текст + Символы.ПС + 
				"
				|ОБЪЕДИНИТЬ ВСЕ
				|";
		КонецЕсли;
			
		Запрос.Текст = Запрос.Текст + 
			"
			|ВЫБРАТЬ РАЗЛИЧНЫЕ
			|	Товары.Товар.Наименование КАК Товар,
			|	""" + ИмяДокумента + "." + ИмяТЧ + """ КАК Источник
			|ИЗ 
			|	Документ." + ИмяДокумента + "." + ИмяТЧ + " КАК Товары";

	КонецЦикла;
КонецЦикла;

Запрос.Текст = Запрос.Текст + Символы.ПС + 
	"
	|ИТОГИ ПО
	|	Источник";
	
РезультатЗапроса = Запрос.Выполнить(); 

Если РезультатЗапроса.Пустой() Тогда 
	Возврат; 
	КонецЕсли; 
		
ВыборкаИсточник = РезультатЗапроса.Выбрать(ОбходРезультатаЗапроса.ПоГруппировкам);

Сообщение = Новый СообщениеПользователю;

Пока ВыборкаИсточник.Следующий() Цикл
	Сообщить(" Документ: " + ВыборкаИсточник.Источник);
	
	ВыборкаТовар = ВыборкаИсточник.Выбрать();
	
	Пока ВыборкаТовар.Следующий() Цикл
		Сообщение.Текст = "Товар: " + ВыборкаТовар.Товар;
		Сообщение.Сообщить();
	КонецЦикла;
КонецЦикла;
```