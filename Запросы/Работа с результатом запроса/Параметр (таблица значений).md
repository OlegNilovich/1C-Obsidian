#ЗАПРОСЫ

В качестве параметра для запроса можно использовать таблицу значений.

Таблица значений может быть в качестве реквизита, получаться из результата запроса, или создаваться в коде.

При создании колонок таблицы значений в коде, важно указать их тип, с помощью объекта "Описание типов".

```bsl
&НаКлиенте
Процедура ПараметрТаблицаЗначений(Команда)
	ПараметрТаблицаЗначенийНаСервере();
КонецПроцедуры
&НаСервере
Процедура ПараметрТаблицаЗначенийНаСервере()
	
	// 1. Создаем таблицу значений и ее колонки с описаниями типов
	ТаблицаЗначений = Новый ТаблицаЗначений;
	ТаблицаЗначений.Колонки.Добавить("Номенклатура", Новый 
	ОписаниеТипов("СправочникСсылка.Номенклатура"));
	ТаблицаЗначений.Колонки.Добавить("Количество", Новый ОписаниеТипов("Строка"));
	
	// 2. Добавляем три строки в таблицу значений
	НоваяСтрока = ТаблицаЗначений.Добавить();
	НоваяСтрока.Номенклатура = Справочники.Номенклатура.НайтиПоНаименованию("Смартфон POCO X3");
	НоваяСтрока.Количество = 3;
	
	НоваяСтрока = ТаблицаЗначений.Добавить();
	НоваяСтрока.Номенклатура = 
	Справочники.Номенклатура.НайтиПоНаименованию("Духовка Hansa Boei68431");
	НоваяСтрока.Количество = 5;
	
	НоваяСтрока = ТаблицаЗначений.Добавить();
	НоваяСтрока.Номенклатура = 
	Справочники.Номенклатура.НайтиПоНаименованию("Морозильник Indesit DFZ 4150");
	НоваяСтрока.Количество = 7;
	
	// 3. Создаем запрос, который поместит таблицу значений во временную таблицу
	Запрос = Новый Запрос;
	Запрос.МенеджерВременныхТаблиц = Новый МенеджерВременныхТаблиц;
	Запрос.Текст = 
	"ВЫБРАТЬ
	|	ТаблицаЗначений.Номенклатура КАК		Номенклатура,
	|	ТаблицаЗначений.Количество КАК				Количество
	|ПОМЕСТИТЬ ВТ_ТаблицаЗначений
	|ИЗ
	|	&ТаблицаЗначений КАК ТаблицаЗначений";
	Запрос.УстановитьПараметр("ТаблицаЗначений", ТаблицаЗначений);
	Запрос.Выполнить();

	// 4. Используем рвременную таблицу для соединения с таблицей "ЦеныНоменклатуры"
	Запрос.Текст = "ВЫБРАТЬ
	|	ВТ_ТаблицаЗначений.Номенклатура КАК		Номенклатура,
	|	ВТ_ТаблицаЗначений.Количество КАК			Количество,
	|	ЕСТЬNULL(Цены.Цена, 0) КАК						Цена
	|ИЗ
	|	ВТ_ТаблицаЗначений КАК ВТ_ТаблицаЗначений
	|		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.ЦеныНоменклатуры.СрезПоследних() КАК Цены
	|		ПО ВТ_ТаблицаЗначений.Номенклатура = Цены.Номенклатура";
	
	// 4. Обрабатываем результат
	Выборка = Запрос.Выполнить().Выбрать();
	Пока Выборка.Следующий() Цикл
		Текст = "Номенклатура: %1, Количество: %2, Цена: %3";
		Сообщить(СтрШаблон(Текст, Выборка.Номенклатура, Выборка.Количество, Выборка.Цена,));
	КонецЦикла;
	
КонецПроцедуры
```