#ЗАПРОСЫ

```bsl
&НаКлиенте
Процедура ОбойтиВыборку(Команда)
	ОбойтиВыборкуНаСервере();
КонецПроцедуры

&НаСервере
Процедура ОбойтиВыборкуНаСервере()
	Запрос = Новый Запрос;
	Запрос.Текст = 
		"ВЫБРАТЬ
		|	РасходнаяНакладнаяТовары.Номенклатура КАК		Номенклатура,
		|	РасходнаяНакладнаяТовары.Количество КАК			Количество
		|ИЗ
		|	Документ.РасходнаяНакладная.Товары КАК			РасходнаяНакладнаяТовары
		|ИТОГИ
		|	СУММА(Количество)
		|ПО
		|	Номенклатура ИЕРАРХИЯ";
	ТипОбхода = ОбходРезультатаЗапроса.ПоГруппировкамСИерархией;
	Выборка = Запрос.Выполнить().Выбрать(ТипОбхода, "Номенклатура");
	ОбойтиРекурсивно(Выборка);
КонецПроцедуры

Процедура ОбойтиРекурсивно(Выборка)
	Пока Выборка.Следующий() Цикл
		Текст = "%1 Наименование: %2 Количество: %3";
		Сообщить(СтрШаблон(Текст, Отступ(Выборка.Уровень()), Выборка.Номенклатура, Выборка.Количество));
		ТипОбхода = ОбходРезультатаЗапроса.ПоГруппировкамСИерархией;
		ОбойтиРекурсивно(Выборка.Выбрать(ТипОбхода, Выборка.Группировка()));
	КонецЦикла;
КонецПроцедуры

Функция Отступ(Уровень)
	Отступы = Новый Соответствие;
	Отступы.Вставить(0, "");	
	Отступы.Вставить(1, "=>");
	Отступы.Вставить(2, "==>");
	Отступы.Вставить(3, "===>");
	Возврат Отступы.Получить(Уровень);
КонецФункции
```